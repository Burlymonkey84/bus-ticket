<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Bus Ticketing â€” Login</title>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <style>
        body{font-family:system-ui,Arial;display:flex;align-items:center;justify-content:center;height:100vh;background:#f5f7fb}
        .card{background:white;padding:24px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,.08);width:320px}
        input{width:100%;padding:8px;margin:8px 0;border:1px solid #ddd;border-radius:6px}
        button{width:100%;padding:10px;border:none;border-radius:6px;background:#2563eb;color:white;font-weight:600}
        .muted{font-size:13px;color:#666;text-align:center;margin-top:12px}
        a{color:#2563eb}
    </style>
</head>
<body>
<div class="card">
    <h2 style="margin:0 0 10px 0">Sign in</h2>
    <input id="username" placeholder="Username" />
    <input id="password" placeholder="Password" type="password" />
    <button id="loginBtn">Login</button>
    <p class="muted">No account? <a href="register.html">Register</a></p>
    <p id="msg" style="color:#b91c1c"></p>
</div>

<script>
    const api = '';
    document.getElementById('loginBtn').addEventListener('click', async () => {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      document.getElementById('msg').textContent = '';

      if(!username||!password){ document.getElementById('msg').textContent = 'Enter username and password'; return; }

      try{
        const res = await fetch(api + '/api/auth/login', {
          method:'POST',
          headers:{ 'Content-Type':'application/json' },
          body: JSON.stringify({ username, password })
        });
        if(!res.ok){ const text = await res.text(); throw new Error(text || res.status); }
        const data = await res.json();
        localStorage.setItem('jwt', data.token);
        location.href = 'dashboard.html';
      }catch(e){
        document.getElementById('msg').textContent = 'Login failed: ' + e.message;
      }
    });
</script>
</body>
</html>
